<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Report Visualisation</title>

    <script src="static/jquery.min.js"></script>
    <script src="static/arbor.js"></script>
    <script src="static/graphics.js"></script>
    <script src="static/renderer.js"></script>
    <script src="data.json"></script>
</head>
<body>

<canvas id="viewport" height="100%" width="75%"></canvas>

<div class="container">

    <h1>Node <span id="node_name">Test</span></h1>

</div>

<script>

    $("#viewport").attr("width", window.innerWidth * 0.75);
    $("#viewport").attr("height", window.innerHeight * 0.9);

    var sys = arbor.ParticleSystem(1, 400, 1);
    sys.parameters({gravity: false});

    sys.renderer = Renderer("#viewport");

//    var data = {
//        nodes: {
//            animals: {'color': 'red', 'shape': 'box', 'label': 'Animals'},
//            dog: {'color': 'green', 'shape': 'box', 'label': 'dog'},
//            cat: {'color': 'blue', 'shape': 'box', 'label': 'cat'}
//        },
//        edges: {
//            animals: {dog: {}, cat: {}}
//        }
//    };
    sys.graft(data);

    $("#viewport").mousedown(function (e) {
        var pos = $(this).offset();
        var p = {x: e.pageX - pos.left, y: e.pageY - pos.top};
        selected = nearest = dragged = sys.nearest(p);

        if (selected.node !== null) {
            var edgesFrom = sys.getEdgesFrom(selected.node.name);
            var edgesTo = sys.getEdgesTo(selected.node.name);
            console.log(edgesFrom);
            console.log(edgesTo);
        }
        return false;
    });


</script>

</body>
</html>